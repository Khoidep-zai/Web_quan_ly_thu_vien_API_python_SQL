{% extends 'base.html' %}
{% block title %}Danh sách sách{% endblock %}
{% block content %}
<h1>Danh sách sách</h1>
<form method="get" class="mb-3">
  <div class="input-group">
    <input type="text" name="q" value="{{ q }}" class="form-control" placeholder="Tìm theo tên, tác giả, thể loại">
    <button class="btn btn-primary" type="submit">Tìm</button>
  </div>
</form>
{% if books %}
  <div class="list-group">
    {% for b in books %}
      <div class="list-group-item">
        <h5>{{ b.title }}</h5>
        <p class="mb-1">Tác giả: {{ b.author or 'N/A' }}{% if b.category %} — Thể loại: {{ b.category }}{% endif %}</p>
        <small>Sẵn có: {{ b.available_copies }} / {{ b.total_copies }}</small>
      </div>
    {% endfor %}
  </div>

  <nav aria-label="Page navigation" class="mt-3">
    <ul class="pagination">
      <li class="page-item{% if not pagination.has_prev %} disabled{% endif %}">
        <a class="page-link" href="?page={{ pagination.prev_num }}&q={{ q }}">&laquo; Previous</a>
      </li>
      <li class="page-item disabled"><span class="page-link">Page {{ pagination.page }} / {{ pagination.pages }}</span></li>
      <li class="page-item{% if not pagination.has_next %} disabled{% endif %}">
        <a class="page-link" href="?page={{ pagination.next_num }}&q={{ q }}">Next &raquo;</a>
      </li>
    </ul>
  </nav>
{% else %}
  <p>Không tìm thấy sách.</p>
{% endif %}
{% endblock %}
